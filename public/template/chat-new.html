<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/styles.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@500&family=Lilita+One&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Bree+Serif&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Secular+One&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,200;0,300;0,700;1,900&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Rubik:wght@500&display=swap');
    </style>
    <!-- Alpine js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>

<body class="text-abu font-poppins">
    <div class="min-h-screen bg-indigo-50 flex flex-col items-center justify-center">
        <!-- chat box -->
        <div class="w-80 h-96 flex flex-col border shadow-md bg-white">
            <!-- user info -->
            <div class="flex items-center justify-between border-b p-2">
                <div class="flex items-center">
                    <div class="pl-2">
                        <div class="font-semibold">
                            <a class="hover:underline" href="#">John Doe</a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- end user info -->

            <?php if (isset($model['chat']) && $model['chat'] != null && !isset($model['error'])) { ?>
            <div class="flex-1 px-4 py-4 overflow-y-auto">
                <?php foreach ($model['chat'] as $row) { ?>
                    <?php if ($row['sender'] == "User") { ?>

                <!-- chat message -->
                <!-- LEFT -->
                <div class="flex items-center mb-4">
                    <div class="flex-1 bg-dark-white text-white p-2 rounded-lg mb-2 relative">
                        <div class="text-abu">Lorem ipsum dolor sit amet, consectetur adipisicing elit.</div>
                        <!-- arrow -->
                        <div class="absolute left-0 top-1/2 transform -translate-x-1/2 rotate-45 w-2 h-2 bg-dark-white">
                        </div>
                        <!-- end arrow -->
                    </div>
                </div>
                <!-- end chat message -->
                <?php } else if ($row['sender'] == "Admin") { ?>

                <!-- chat message -->
                <!-- Right -->
                <div class="flex items-center flex-row-reverse mb-4">
                    <div class="flex-1 bg-biru text-gray-800 p-2 rounded-lg mb-2 relative">
                        <div class="text-dark-white">Lorem ipsum dolor sit amet, consectetur adipisicing elit.Lorem
                            ipsum dolor sit amet, consectetur adipisicing elit.</div>
                        <!-- arrow -->
                        <div class="absolute right-0 top-1/2 transform translate-x-1/2 rotate-45 w-2 h-2 bg-biru"></div>
                        <!-- end arrow -->
                    </div>
                </div>
                <!-- end chat message -->
                <!-- chat message -->
                <!-- Right -->
                <div class="flex items-center flex-row-reverse mb-4">
                    <div class="flex-1 bg-biru text-gray-800 p-2 rounded-lg mb-2 relative">
                        <div class="text-dark-white">Lorem ipsum dolor sit amet, consectetur adipisicing elit.Lorem
                            ipsum dolor sit amet, consectetur adipisicing elit.</div>
                        <!-- arrow -->
                        <div class="absolute right-0 top-1/2 transform translate-x-1/2 rotate-45 w-2 h-2 bg-biru"></div>
                        <!-- end arrow -->
                    </div>
                </div>
                <!-- end chat message -->
                <!-- chat message -->
                <!-- Right -->
                <div class="flex items-center flex-row-reverse mb-4">
                    <div class="flex-1 bg-biru text-gray-800 p-2 rounded-lg mb-2 relative">
                        <div class="text-dark-white">Lorem ipsum dolor sit amet, consectetur adipisicing elit.Lorem
                            ipsum dolor sit amet, consectetur adipisicing elit.</div>
                        <!-- arrow -->
                        <div class="absolute right-0 top-1/2 transform translate-x-1/2 rotate-45 w-2 h-2 bg-biru"></div>
                        <!-- end arrow -->
                    </div>
                </div>
                <!-- end chat message -->
                <!-- chat message -->
                <!-- Right -->
                <div class="flex items-center flex-row-reverse mb-4">
                    <div class="flex-1 bg-biru text-gray-800 p-2 rounded-lg mb-2 relative">
                        <div class="text-dark-white">Lorem ipsum dolor sit amet, consectetur adipisicing elit.Lorem
                            ipsum dolor sit amet, consectetur adipisicing elit.</div>
                        <!-- arrow -->
                        <div class="absolute right-0 top-1/2 transform translate-x-1/2 rotate-45 w-2 h-2 bg-biru"></div>
                        <!-- end arrow -->
                    </div>
                </div>
                <!-- end chat message -->
                    <?php } ?>
                <?php } ?>
            </div>
            <?php } ?>

            <form action="/admin/chat/<?=$model['user_email']?>" method="post" class="w-full">
            <input type="hidden" name="user_email" value="<?=$model['user_email']?>">
            <div class="flex items-center border-t p-2">
                <!-- chat input action -->
                <div class="w-full mx-2">
                    <input class="w-full rounded-full border border-gray-200 px-4 py-2" type="text" value=""
                        placeholder="Aa" autofocus name="admin_message" />
                </div>
                <!-- chat send action -->
                <div>
                    <button class="inline-flex hover:bg-indigo-50 rounded-full p-2" type="submit">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                        </svg>
                    </button>
                </div>
                <!-- end chat send action -->
            </div>
            </form>
        </div>
        <!-- end chat box -->
    </div>
</body>

</html>
<!-- 
<section x-data="{open : true}" class="p-4 sm:ml-64 relative">
    <div class="container mx-auto px-4 py-4 lg:px-20 lg:py-28 h-screen">
        <div class="w-full rounded-xl">
            <div class="w-full p-6SS h-[40rem] overflow-y-auto">
                <ul class="space-y-2">
                    <?php if (isset($model['chat']) && $model['chat'] != null && !isset($model['error'])) { ?>
                    <?php foreach ($model['chat'] as $row) { ?>
                    <?php if ($row['sender'] == "User") { ?>
                    <li class="flex justify-start">
                        <div class="relative max-w-md px-4 py-2 bg-dark-white text-abu rounded shadow">
                            <span class="block">
                                <?= $row['message'] ?>
                            </span>
                        </div>
                    </li>
                    <?php } else if ($row['sender'] == "Admin") { ?>
                    <li class="flex justify-end">
                        <div class="relative max-w-md px-4 py-2 text-dark-white bg-biru rounded shadow">
                            <span class="block">
                                <?= $row['message'] ?>
                            </span>
                        </div>
                    </li>
                    <?php } ?>
                    <?php } ?>
                    <?php } ?>
                </ul>
            </div>
        </div>
        <div
            class="absolute bottom-6 flex flex-row items-center space-x-3 justify-between gap-3 w-full max-w-screen-lg mx-auto">
            <form action="/admin/chat/<?=$model['user_email']?>" method="post" class="w-full">
                <input type="hidden" name="user_email" value="<?=$model['user_email']?>">
                <input type="text" placeholder="Message"
                    class="block w-full py-2 px-4 pl-4 bg-gray-100 rounded-full outline-none border-2 border-abu focus:text-gray-700"
                    name="admin_message" required />
                <button type="submit" class="bg-biru text-dark-white py-2 px-3 rounded-full">Send</button>
            </form>
        </div>
    </div>
</section> -->